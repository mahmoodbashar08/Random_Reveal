import C from"react";var V=e=>{let r=g(e);return C.createElement(C.Fragment,null,r)};import{useRef as L,isValidElement as $,cloneElement as ee}from"react";import{useState as K,useRef as v,useCallback as S}from"react";import{useEffect as W,useLayoutEffect as X}from"react";var B=Object.defineProperty,G=Object.defineProperties,H=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,w=(e,r,t)=>r in e?B(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,A=(e,r)=>{for(var t in r||(r={}))J.call(r,t)&&w(e,t,r[t]);if(O)for(var t of O(r))N.call(r,t)&&w(e,t,r[t]);return e},P=(e,r)=>G(e,H(r)),F=typeof window=="undefined"?W:X,j=({isPlaying:e,duration:r,startAt:t=0,updateInterval:n=0,onComplete:s,onUpdate:c})=>{let[o,p]=K(t),f=v(t*-1e3),m=v(null),a=v(null),b=v(null),u=v({elapsedTimeRef:0,startAtRef:t,durationRef:r,updateIntervalRef:n});u.current=P(A({},u.current),{durationRef:r,updateIntervalRef:n});let l=d=>{let i=d/1e3;if(a.current===null){a.current=i,m.current=requestAnimationFrame(l);return}let{durationRef:R,elapsedTimeRef:_,updateIntervalRef:T,startAtRef:E}=u.current,z=i-a.current,h=_+z;a.current=i,u.current=P(A({},u.current),{elapsedTimeRef:h});let Q=E+(T===0?h:(h/T|0)*T),U=E+h,I=typeof R=="number"&&U>=R;p(I?R:Q),I||(m.current=requestAnimationFrame(l))},y=()=>{m.current&&cancelAnimationFrame(m.current),b.current&&clearTimeout(b.current),a.current=null},x=S(d=>{let i=typeof d=="number"?d:t;y(),u.current=P(A({},u.current),{elapsedTimeRef:0,startAtRef:i}),p(i),e&&(m.current=requestAnimationFrame(l))},[e,t]);return F(()=>{if(c==null||c(o),r&&o>=r){f.current+=r*1e3;let{shouldRepeat:d=!1,delay:i=0,newStartAt:R}=(s==null?void 0:s(f.current/1e3))||{};d&&(b.current=setTimeout(()=>x(R),i*1e3))}},[o,r]),F(()=>(e&&(m.current=requestAnimationFrame(l)),y),[e]),{elapsedTime:o,reset:x}};var q={easeOutQuad:(e,r,t,n)=>(e/=n,-t*e*(e-2)+r),easeInQuad:(e,r,t,n)=>(e/=n,t*e*e+r),random:(e,r,t)=>Math.floor(Math.random()*(t-r+1)+r),linear:(e,r,t,n)=>t*e/n+r},M=(e,r)=>{let t=e.filter(n=>!(r==null?void 0:r.includes(n))).length;return 1/(t-1)};var Y=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],k=(e=Y)=>e[Math.floor(Math.random()*e.length)],Z=(e,r)=>{if(r===0)return[e,0];let t=r>1?1:r;t=t<0?0:t;let n=e*t;return[e-n,n]},D=({characters:e,duration:r,revealDuration:t=.6,revealEasing:n="linear",ignoreCharacterSet:s})=>{let c=Array.isArray(e)?e:e.split(""),[o,p]=Z(r,t),f=q[n],m=M(c,s),a=0,b=u=>{if(u||t===0)return r;let l=f(a*m,0,p,1);return a+=1,o+l};return c.map(u=>{let l=!!(s==null?void 0:s.find(y=>y===u));return{character:u,isIgnored:l,revealTime:b(l)}})};var g=e=>{var c;let r=L(),t=L([]),{elapsedTime:n}=j({isPlaying:e.isPlaying,duration:e.duration,updateInterval:(c=e.updateInterval)!=null?c:.065,onComplete:e.onComplete});if(r.current===n)return t.current;r.current=n,t.current=[];let s=D(e);for(let o=0;o<s.length;o++){let{character:p,isIgnored:f,revealTime:m}=s[o],a=f||n>=m?p:k(e.characterSet);t.current.push($(a)?ee(a,{key:o}):a)}return t.current};export{V as RandomReveal,g as useRandomReveal};
